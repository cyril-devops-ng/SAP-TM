*&---------------------------------------------------------------------*
*& Include ztm_pdr_pbo
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*& Module STATUS_0100 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0100 OUTPUT.
  SET PF-STATUS 'ZSTATUS_0100'.
  SET TITLEBAR 'ZTITLE_100'.
  " ---------------------------------------------------------------------
  " 10: Create PDR Report
  " ---------------------------------------------------------------------
  TRY.
      DATA(lo_pdr)
      = lcl_pdr=>create_pdr_report( it_fwq_no = sr_fwqno[]
                                    it_bl_no  = s_bolno[]
                                    if_mantyp = s_mantyp ).
      " ---------------------------------------------------------------------
      " 20: Create Grid
      " *********************************************************************
      lo_pdr->create_grid( CHANGING ct_tab = gt_output ).
      " ---------------------------------------------------------------------
      " 30: Show Grid
      " ---------------------------------------------------------------------
      lo_pdr->show_grid( ).
      " ---------------------------------------------------------------------
      " 40: Catch exception
      " *********************************************************************
    CATCH zcx_tm_form_exception INTO DATA(lo_tm_ex).
      CLEAR lt_msg.
      lt_msg = zcl_tm_form_helper=>create_bapi_ret_from_exception( lo_tm_ex ).
      zcl_tm_form_helper=>display_bapi_log_gui( lt_msg ).
      LEAVE TO SCREEN 0.
  ENDTRY.
ENDMODULE.
